"use strict";(self.webpackChunkemployee_monitoring_frontend=self.webpackChunkemployee_monitoring_frontend||[]).push([[763],{89(e,t,a){a.d(t,{S:()=>i});var s=a(379);const n=[{id:1,title:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442 \u0437\u0430 15 \u044f\u043d\u0432\u0430\u0440\u044f",type:"daily",dateRange:{start:new Date("2024-01-15"),end:new Date("2024-01-15")},generatedAt:new Date("2024-01-15T18:00:00"),generatedBy:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440",status:"generated",downloadUrl:"#",summary:{totalEmployees:85,averageProductivity:78,totalHoursTracked:425,violationsCount:8,topDepartments:[{department:"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430",employeeCount:25,averageProductivity:86,totalHours:120},{department:"\u0414\u0438\u0437\u0430\u0439\u043d",employeeCount:15,averageProductivity:85,totalHours:75},{department:"\u041c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433",employeeCount:20,averageProductivity:74,totalHours:100}],trend:"up"},filters:{dateRange:{start:new Date("2024-01-15"),end:new Date("2024-01-15")},includeInactive:!1}},{id:2,title:"\u041d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442 \u0437\u0430 8-14 \u044f\u043d\u0432\u0430\u0440\u044f",type:"weekly",dateRange:{start:new Date("2024-01-08"),end:new Date("2024-01-14")},generatedAt:new Date("2024-01-14T18:00:00"),generatedBy:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",status:"generated",downloadUrl:"#",summary:{totalEmployees:85,averageProductivity:76,totalHoursTracked:2975,violationsCount:45,topDepartments:[{department:"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430",employeeCount:25,averageProductivity:84,totalHours:840},{department:"\u0414\u0438\u0437\u0430\u0439\u043d",employeeCount:15,averageProductivity:83,totalHours:525},{department:"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",employeeCount:10,averageProductivity:91,totalHours:400}],trend:"stable"}},{id:3,title:"\u041c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442 \u0437\u0430 \u044f\u043d\u0432\u0430\u0440\u044c",type:"monthly",dateRange:{start:new Date("2024-01-01"),end:new Date("2024-01-31")},generatedAt:new Date("2024-01-31T18:00:00"),generatedBy:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440",status:"pending",summary:{totalEmployees:85,averageProductivity:77,totalHoursTracked:12750,violationsCount:180,topDepartments:[{department:"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430",employeeCount:25,averageProductivity:85,totalHours:3e3},{department:"\u0414\u0438\u0437\u0430\u0439\u043d",employeeCount:15,averageProductivity:84,totalHours:1800},{department:"\u041c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433",employeeCount:20,averageProductivity:73,totalHours:2400}],trend:"up"}},{id:4,title:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u043e\u0442\u0434\u0435\u043b\u0443 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438",type:"custom",dateRange:{start:new Date("2024-01-01"),end:new Date("2024-01-15")},generatedAt:new Date("2024-01-16T10:30:00"),generatedBy:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",status:"generated",downloadUrl:"#",summary:{totalEmployees:25,averageProductivity:86,totalHoursTracked:1500,violationsCount:12,topDepartments:[{department:"Frontend",employeeCount:10,averageProductivity:88,totalHours:600},{department:"Backend",employeeCount:8,averageProductivity:85,totalHours:480},{department:"DevOps",employeeCount:7,averageProductivity:84,totalHours:420}],trend:"up"},filters:{departments:["\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430"],dateRange:{start:new Date("2024-01-01"),end:new Date("2024-01-15")}}}],r=[{id:1,name:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442",description:"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442 \u043f\u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438",type:"daily",defaultFilters:{dateRange:{start:new Date,end:new Date}},schedule:{enabled:!0,frequency:"daily",time:"18:00",recipients:["admin@company.com","managers@company.com"]}},{id:2,name:"\u041d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442",description:"\u0421\u0432\u043e\u0434\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442 \u0437\u0430 \u043d\u0435\u0434\u0435\u043b\u044e",type:"weekly",defaultFilters:{dateRange:{start:new Date((new Date).setDate((new Date).getDate()-7)),end:new Date}},schedule:{enabled:!0,frequency:"weekly",time:"18:00",recipients:["admin@company.com"]}},{id:3,name:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u044f\u043c",description:"\u041e\u0442\u0447\u0435\u0442 \u043e \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u044f\u0445 \u0438 \u043d\u0438\u0437\u043a\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438",type:"custom",defaultFilters:{dateRange:{start:new Date((new Date).setDate((new Date).getDate()-30)),end:new Date},productivityThreshold:60,includeInactive:!0}}],l=()=>({totalEmployees:Math.floor(50*Math.random())+50,averageProductivity:Math.floor(30*Math.random())+60,totalHoursTracked:Math.floor(500*Math.random())+200,violationsCount:Math.floor(20*Math.random()),topDepartments:[{department:"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430",employeeCount:Math.floor(20*Math.random())+10,averageProductivity:Math.floor(30*Math.random())+65,totalHours:Math.floor(200*Math.random())+100},{department:"\u0414\u0438\u0437\u0430\u0439\u043d",employeeCount:Math.floor(10*Math.random())+5,averageProductivity:Math.floor(30*Math.random())+65,totalHours:Math.floor(150*Math.random())+50},{department:"\u041c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433",employeeCount:Math.floor(15*Math.random())+5,averageProductivity:Math.floor(30*Math.random())+60,totalHours:Math.floor(180*Math.random())+60}],trend:Math.random()>.5?"up":Math.random()>.5?"down":"stable"}),i={getReports:()=>new Promise(e=>{setTimeout(()=>{e([...n])},500)}),getReportById:e=>new Promise(t=>{setTimeout(()=>{const a=n.find(t=>t.id===e);t(a||null)},300)}),getTemplates:()=>new Promise(e=>{setTimeout(()=>{e([...r])},400)}),createReport:e=>new Promise(t=>{setTimeout(()=>{const a={id:n.length+1,title:e.title,type:e.type,dateRange:e.filters.dateRange,generatedAt:new Date,generatedBy:"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",status:"generated",downloadUrl:"#report-".concat(n.length+1),summary:l(),filters:e.filters};n.unshift(a),t(a)},1e3)}),deleteReport:e=>new Promise(t=>{setTimeout(()=>{const a=n.findIndex(t=>t.id===e);-1!==a?(n.splice(a,1),t(!0)):t(!1)},300)}),downloadReport:e=>new Promise((t,a)=>{setTimeout(()=>{const s=n.find(t=>t.id===e);s&&"generated"===s.status?t("/reports/download/".concat(e,"/report.pdf")):a(new Error("Report not available for download"))},500)}),getReportData:e=>new Promise(t=>{setTimeout(()=>{const a=l();e.departments&&e.departments.length>0&&(a.topDepartments=a.topDepartments.filter(t=>e.departments.includes(t.department)),a.totalEmployees=a.topDepartments.reduce((e,t)=>e+t.employeeCount,0)),e.productivityThreshold&&(a.averageProductivity=Math.max(a.averageProductivity,e.productivityThreshold),a.topDepartments=a.topDepartments.map(t=>(0,s.A)((0,s.A)({},t),{},{averageProductivity:Math.max(t.averageProductivity,e.productivityThreshold)}))),t(a)},800)})}},763(e,t,a){a.r(t),a.d(t,{default:()=>m});var s=a(950),n=a(994),r=a(414);const l=e=>{let{report:t,onView:a,onDownload:s,onDelete:n}=e;const l=e=>e.toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric"}),i=()=>{a(t.id)};return(0,r.jsxs)("div",{className:"report-card",onClick:i,children:[(0,r.jsxs)("div",{className:"report-header",children:[(0,r.jsxs)("div",{className:"report-type",children:[(0,r.jsx)("span",{className:"type-icon",children:(e=>{switch(e){case"daily":return"\ud83d\udcc5";case"weekly":return"\ud83d\udcc6";case"monthly":return"\ud83d\uddd3\ufe0f";case"custom":return"\ud83d\udcca";default:return"\ud83d\udcc4"}})(t.type)}),(0,r.jsx)("span",{className:"type-label",children:(e=>{switch(e){case"daily":return"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439";case"weekly":return"\u041d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439";case"monthly":return"\u041c\u0435\u0441\u044f\u0447\u043d\u044b\u0439";case"custom":return"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u044b\u0439";default:return"\u041e\u0442\u0447\u0435\u0442"}})(t.type)})]}),(0,r.jsx)("div",{className:"report-status",style:{backgroundColor:(e=>{switch(e){case"generated":return"#52c41a";case"pending":return"#faad14";case"failed":return"#ff4d4f";default:return"#8c8c8c"}})(t.status)},children:(e=>{switch(e){case"generated":return"\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d";case"pending":return"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435";case"failed":return"\u041e\u0448\u0438\u0431\u043a\u0430";default:return"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"}})(t.status)})]}),(0,r.jsxs)("div",{className:"report-content",children:[(0,r.jsx)("h3",{className:"report-title",children:t.title}),(0,r.jsxs)("div",{className:"report-dates",children:[(0,r.jsxs)("div",{className:"date-info",children:[(0,r.jsx)("span",{className:"date-label",children:"\u041f\u0435\u0440\u0438\u043e\u0434:"}),(0,r.jsxs)("span",{className:"date-value",children:[l(t.dateRange.start)," - ",l(t.dateRange.end)]})]}),(0,r.jsxs)("div",{className:"date-info",children:[(0,r.jsx)("span",{className:"date-label",children:"\u0421\u043e\u0437\u0434\u0430\u043d:"}),(0,r.jsx)("span",{className:"date-value",children:(d=t.generatedAt,d.toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,r.jsxs)("div",{className:"date-info",children:[(0,r.jsx)("span",{className:"date-label",children:"\u0410\u0432\u0442\u043e\u0440:"}),(0,r.jsx)("span",{className:"date-value",children:t.generatedBy})]})]}),(0,r.jsxs)("div",{className:"report-summary",children:[(0,r.jsxs)("div",{className:"summary-item",children:[(0,r.jsx)("span",{className:"summary-value",children:t.summary.totalEmployees}),(0,r.jsx)("span",{className:"summary-label",children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"})]}),(0,r.jsxs)("div",{className:"summary-item",children:[(0,r.jsxs)("span",{className:"summary-value",children:[t.summary.averageProductivity,"%"]}),(0,r.jsx)("span",{className:"summary-label",children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"})]}),(0,r.jsxs)("div",{className:"summary-item",children:[(0,r.jsx)("span",{className:"summary-value",children:t.summary.violationsCount}),(0,r.jsx)("span",{className:"summary-label",children:"\u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0439"})]}),(0,r.jsxs)("div",{className:"summary-item",children:[(0,r.jsx)("span",{className:"summary-value",children:t.summary.totalHoursTracked}),(0,r.jsx)("span",{className:"summary-label",children:"\u0427\u0430\u0441\u043e\u0432"})]})]}),t.summary.topDepartments&&t.summary.topDepartments.length>0&&(0,r.jsxs)("div",{className:"top-departments",children:[(0,r.jsx)("span",{className:"departments-label",children:"\u0422\u043e\u043f \u043e\u0442\u0434\u0435\u043b\u044b:"}),(0,r.jsxs)("div",{className:"departments-list",children:[t.summary.topDepartments.slice(0,2).map((e,t)=>(0,r.jsxs)("span",{className:"department-tag",children:[e.department," (",e.averageProductivity,"%)"]},t)),t.summary.topDepartments.length>2&&(0,r.jsxs)("span",{className:"more-departments",children:["+",t.summary.topDepartments.length-2," \u0435\u0449\u0435"]})]})]})]}),(0,r.jsxs)("div",{className:"report-actions",children:[(0,r.jsx)("button",{className:"action-button view-button",onClick:i,children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"}),"generated"===t.status&&s&&(0,r.jsx)("button",{className:"action-button download-button",onClick:e=>{e.stopPropagation(),s&&"generated"===t.status&&s(t.id)},children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"}),n&&(0,r.jsx)("button",{className:"action-button delete-button",onClick:e=>{e.stopPropagation(),n&&n(t.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]});var d};var i=a(379);const d=e=>{let{onFilterChange:t,initialFilters:a,departments:n=[]}=e;const[l,d]=(0,s.useState)(()=>({dateRange:(null===a||void 0===a?void 0:a.dateRange)||{start:new Date((new Date).setDate((new Date).getDate()-30)),end:new Date},departments:(null===a||void 0===a?void 0:a.departments)||[],productivityThreshold:null===a||void 0===a?void 0:a.productivityThreshold,includeInactive:(null===a||void 0===a?void 0:a.includeInactive)||!1})),[c,o]=(0,s.useState)(!1),m=(e,a)=>{const s=(0,i.A)((0,i.A)({},l),{},{dateRange:(0,i.A)((0,i.A)({},l.dateRange),{},{[e]:new Date(a)})});d(s),t(s)},u=e=>{const a=new Date;let s=new Date;switch(e){case"today":s=new Date(a),s.setHours(0,0,0,0);break;case"week":s.setDate(a.getDate()-7);break;case"month":s.setMonth(a.getMonth()-1);break;case"quarter":s.setMonth(a.getMonth()-3)}const n=(0,i.A)((0,i.A)({},l),{},{dateRange:{start:s,end:a}});d(n),t(n)},h=e=>e.toISOString().split("T")[0];return(0,r.jsxs)("div",{className:"report-filters",children:[(0,r.jsxs)("div",{className:"filters-header",children:[(0,r.jsx)("h3",{children:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u043e\u0442\u0447\u0435\u0442\u043e\u0432"}),(0,r.jsxs)("button",{className:"toggle-advanced-btn",onClick:()=>o(!c),children:[c?"\u0421\u043a\u0440\u044b\u0442\u044c":"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435"," \u0444\u0438\u043b\u044c\u0442\u0440\u044b"]})]}),(0,r.jsxs)("div",{className:"date-filters",children:[(0,r.jsxs)("div",{className:"date-quick-buttons",children:[(0,r.jsx)("button",{className:"date-quick-btn",onClick:()=>u("today"),children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"}),(0,r.jsx)("button",{className:"date-quick-btn",onClick:()=>u("week"),children:"\u041d\u0435\u0434\u0435\u043b\u044f"}),(0,r.jsx)("button",{className:"date-quick-btn",onClick:()=>u("month"),children:"\u041c\u0435\u0441\u044f\u0446"}),(0,r.jsx)("button",{className:"date-quick-btn",onClick:()=>u("quarter"),children:"\u041a\u0432\u0430\u0440\u0442\u0430\u043b"})]}),(0,r.jsxs)("div",{className:"date-range",children:[(0,r.jsxs)("div",{className:"date-input-group",children:[(0,r.jsx)("label",{children:"\u0421"}),(0,r.jsx)("input",{type:"date",value:h(l.dateRange.start),onChange:e=>m("start",e.target.value),className:"date-input"})]}),(0,r.jsxs)("div",{className:"date-input-group",children:[(0,r.jsx)("label",{children:"\u041f\u043e"}),(0,r.jsx)("input",{type:"date",value:h(l.dateRange.end),onChange:e=>m("end",e.target.value),className:"date-input"})]})]})]}),c&&(0,r.jsxs)("div",{className:"advanced-filters",children:[(0,r.jsxs)("div",{className:"filter-section",children:[(0,r.jsx)("h4",{className:"filter-title",children:"\u041e\u0442\u0434\u0435\u043b\u044b"}),(0,r.jsxs)("div",{className:"department-filters",children:[n.map(e=>{var a;return(0,r.jsx)("button",{className:"department-filter ".concat(null!==(a=l.departments)&&void 0!==a&&a.includes(e)?"active":""),onClick:()=>(e=>{var a;const s=null!==(a=l.departments)&&void 0!==a&&a.includes(e)?l.departments.filter(t=>t!==e):[...l.departments||[],e],n=(0,i.A)((0,i.A)({},l),{},{departments:s});d(n),t(n)})(e),children:e},e)}),0===n.length&&(0,r.jsx)("div",{className:"no-departments",children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043e\u0442\u0434\u0435\u043b\u043e\u0432"})]})]}),(0,r.jsxs)("div",{className:"filter-section",children:[(0,r.jsx)("h4",{className:"filter-title",children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"}),(0,r.jsxs)("div",{className:"productivity-filter",children:[(0,r.jsxs)("div",{className:"range-input",children:[(0,r.jsx)("input",{type:"range",min:"0",max:"100",value:l.productivityThreshold||0,onChange:e=>(e=>{const a=(0,i.A)((0,i.A)({},l),{},{productivityThreshold:e});d(a),t(a)})(Number(e.target.value)),className:"range-slider"}),(0,r.jsxs)("div",{className:"range-labels",children:[(0,r.jsx)("span",{children:"0%"}),(0,r.jsxs)("span",{className:"current-threshold",children:[l.productivityThreshold||0,"%"]}),(0,r.jsx)("span",{children:"100%"})]})]}),(0,r.jsxs)("div",{className:"threshold-info",children:[(0,r.jsx)("span",{children:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u0441 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c\u044e \u0432\u044b\u0448\u0435:"}),(0,r.jsxs)("span",{className:"threshold-value",children:[l.productivityThreshold||0,"%"]})]})]})]}),(0,r.jsxs)("div",{className:"filter-section",children:[(0,r.jsx)("h4",{className:"filter-title",children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"}),(0,r.jsx)("div",{className:"additional-filters",children:(0,r.jsxs)("label",{className:"checkbox-label",children:[(0,r.jsx)("input",{type:"checkbox",checked:l.includeInactive,onChange:e=>(e=>{const a=(0,i.A)((0,i.A)({},l),{},{includeInactive:e});d(a),t(a)})(e.target.checked),className:"checkbox-input"}),(0,r.jsx)("span",{className:"checkbox-custom"}),"\u0412\u043a\u043b\u044e\u0447\u0430\u044f \u043d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"]})})]})]}),(0,r.jsxs)("div",{className:"active-filters",children:[(0,r.jsxs)("div",{className:"date-range-display",children:[(0,r.jsx)("span",{className:"filter-label",children:"\u041f\u0435\u0440\u0438\u043e\u0434:"}),(0,r.jsxs)("span",{className:"filter-value",children:[l.dateRange.start.toLocaleDateString("ru-RU")," - ",l.dateRange.end.toLocaleDateString("ru-RU")]})]}),l.departments&&l.departments.length>0&&(0,r.jsxs)("div",{className:"departments-display",children:[(0,r.jsx)("span",{className:"filter-label",children:"\u041e\u0442\u0434\u0435\u043b\u044b:"}),(0,r.jsx)("div",{className:"filter-values",children:l.departments.map(e=>(0,r.jsx)("span",{className:"filter-value",children:e},e))})]}),l.productivityThreshold&&l.productivityThreshold>0&&(0,r.jsxs)("div",{className:"productivity-display",children:[(0,r.jsx)("span",{className:"filter-label",children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c:"}),(0,r.jsxs)("span",{className:"filter-value",children:["\u0432\u044b\u0448\u0435 ",l.productivityThreshold,"%"]})]}),l.includeInactive&&(0,r.jsxs)("div",{className:"inactive-display",children:[(0,r.jsx)("span",{className:"filter-label",children:"\u0421\u0442\u0430\u0442\u0443\u0441:"}),(0,r.jsx)("span",{className:"filter-value",children:"\u0412\u043a\u043b\u044e\u0447\u0430\u044f \u043d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445"})]})]}),(0,r.jsx)("div",{className:"filters-actions",children:(0,r.jsx)("button",{className:"clear-filters-btn",onClick:()=>{const e={dateRange:{start:new Date((new Date).setDate((new Date).getDate()-30)),end:new Date},departments:[],productivityThreshold:void 0,includeInactive:!1};d(e),t(e)},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"})})]})};var c=a(18),o=a(89);const m=()=>{const e=(0,n.Zp)(),[t,a]=(0,s.useState)(!0),[i,m]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[p,v]=(0,s.useState)("grid"),[y,x]=(0,s.useState)("all"),[g,j]=(0,s.useState)({dateRange:{start:new Date((new Date).setDate((new Date).getDate()-30)),end:new Date}}),N=(0,s.useCallback)(async()=>{a(!0);try{const e=await o.S.getReports();m(e)}catch(e){console.error("Error loading reports:",e)}finally{a(!1)}},[]),w=(0,s.useCallback)(()=>{let e=[...i];"all"!==y&&(e=e.filter(e=>e.type===y)),e=e.filter(e=>{const t=e.generatedAt;return t>=g.dateRange.start&&t<=g.dateRange.end}),h(e)},[i,y,g]);(0,s.useEffect)(()=>{N()},[N]),(0,s.useEffect)(()=>{w()},[w]);const f=e=>{x(e)},b=t=>{e("/reports/".concat(t))},D=async e=>{try{const t=await o.S.downloadReport(e);window.open(t,"_blank")}catch(t){console.error("Error downloading report:",t),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0438 \u043e\u0442\u0447\u0435\u0442\u0430")}},k=async e=>{if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043e\u0442\u0447\u0435\u0442?"))try{await o.S.deleteReport(e)&&m(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Error deleting report:",t),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043e\u0442\u0447\u0435\u0442\u0430")}},C=()=>{e("/reports/new")};return t?(0,r.jsx)("div",{className:"reports-loading",children:(0,r.jsx)(c.A,{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043e\u0442\u0447\u0435\u0442\u043e\u0432...",size:"large"})}):(0,r.jsxs)("div",{className:"reports-page",children:[(0,r.jsxs)("div",{className:"page-header",children:[(0,r.jsx)("div",{className:"header-content",children:(0,r.jsx)("h1",{children:"\u041e\u0442\u0447\u0435\u0442\u044b"})}),(0,r.jsx)("div",{className:"header-actions",children:(0,r.jsx)("button",{className:"create-report-btn",onClick:C,children:"\ud83d\udcca \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0442\u0447\u0435\u0442"})})]}),(0,r.jsx)(d,{onFilterChange:e=>{j(e)},initialFilters:g,departments:["\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430","\u0414\u0438\u0437\u0430\u0439\u043d","\u041c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433","\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430"]}),(0,r.jsxs)("div",{className:"reports-toolbar",children:[(0,r.jsxs)("div",{className:"type-filters",children:[(0,r.jsx)("button",{className:"type-filter ".concat("all"===y?"active":""),onClick:()=>f("all"),children:"\u0412\u0441\u0435 \u043e\u0442\u0447\u0435\u0442\u044b"}),(0,r.jsx)("button",{className:"type-filter ".concat("daily"===y?"active":""),onClick:()=>f("daily"),children:"\ud83d\udcc5 \u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0435"}),(0,r.jsx)("button",{className:"type-filter ".concat("weekly"===y?"active":""),onClick:()=>f("weekly"),children:"\ud83d\udcc6 \u041d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0435"}),(0,r.jsx)("button",{className:"type-filter ".concat("monthly"===y?"active":""),onClick:()=>f("monthly"),children:"\ud83d\uddd3\ufe0f \u041c\u0435\u0441\u044f\u0447\u043d\u044b\u0435"}),(0,r.jsx)("button",{className:"type-filter ".concat("custom"===y?"active":""),onClick:()=>f("custom"),children:"\ud83d\udcca \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u044b\u0435"})]}),(0,r.jsxs)("div",{className:"view-controls",children:[(0,r.jsxs)("span",{className:"results-count",children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e: ",(0,r.jsx)("strong",{children:u.length})," \u043e\u0442\u0447\u0435\u0442\u043e\u0432"]}),(0,r.jsxs)("div",{className:"view-buttons",children:[(0,r.jsx)("button",{className:"view-button ".concat("grid"===p?"active":""),onClick:()=>v("grid"),title:"\u041f\u043b\u0438\u0442\u043e\u0447\u043d\u044b\u0439 \u0432\u0438\u0434",children:"\u25a6"}),(0,r.jsx)("button",{className:"view-button ".concat("list"===p?"active":""),onClick:()=>v("list"),title:"\u0421\u043f\u0438\u0441\u043a\u043e\u0432\u044b\u0439 \u0432\u0438\u0434",children:"\u2630"}),(0,r.jsx)("button",{className:"refresh-button",onClick:N,title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0442\u0447\u0435\u0442\u044b",children:"\ud83d\udd04"})]})]})]}),0===u.length?(0,r.jsxs)("div",{className:"no-reports",children:[(0,r.jsx)("div",{className:"no-reports-icon",children:"\ud83d\udcca"}),(0,r.jsx)("h3",{children:"\u041e\u0442\u0447\u0435\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"}),(0,r.jsx)("p",{children:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u0438\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043e\u0442\u0447\u0435\u0442"}),(0,r.jsx)("button",{className:"create-first-report-btn",onClick:C,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0439 \u043e\u0442\u0447\u0435\u0442"})]}):(0,r.jsx)("div",{className:"reports-container ".concat("grid"===p?"grid-view":"list-view"),children:u.map(e=>(0,r.jsx)(l,{report:e,onView:b,onDownload:D,onDelete:k},e.id))}),(0,r.jsxs)("div",{className:"reports-summary",children:[(0,r.jsxs)("div",{className:"summary-card",children:[(0,r.jsx)("div",{className:"summary-icon",children:"\ud83d\udcc4"}),(0,r.jsxs)("div",{className:"summary-content",children:[(0,r.jsx)("div",{className:"summary-value",children:i.length}),(0,r.jsx)("div",{className:"summary-label",children:"\u0412\u0441\u0435\u0433\u043e \u043e\u0442\u0447\u0435\u0442\u043e\u0432"})]})]}),(0,r.jsxs)("div",{className:"summary-card",children:[(0,r.jsx)("div",{className:"summary-icon",children:"\u2705"}),(0,r.jsxs)("div",{className:"summary-content",children:[(0,r.jsx)("div",{className:"summary-value",children:i.filter(e=>"generated"===e.status).length}),(0,r.jsx)("div",{className:"summary-label",children:"\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043e"})]})]}),(0,r.jsxs)("div",{className:"summary-card",children:[(0,r.jsx)("div",{className:"summary-icon",children:"\u23f3"}),(0,r.jsxs)("div",{className:"summary-content",children:[(0,r.jsx)("div",{className:"summary-value",children:i.filter(e=>"pending"===e.status).length}),(0,r.jsx)("div",{className:"summary-label",children:"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435"})]})]}),(0,r.jsxs)("div",{className:"summary-card",children:[(0,r.jsx)("div",{className:"summary-icon",children:"\ud83d\udcc8"}),(0,r.jsxs)("div",{className:"summary-content",children:[(0,r.jsxs)("div",{className:"summary-value",children:[Math.round(i.reduce((e,t)=>e+t.summary.averageProductivity,0)/i.length)||0,"%"]}),(0,r.jsx)("div",{className:"summary-label",children:"\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"})]})]})]})]})}}}]);